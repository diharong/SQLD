# 관계형 데이터베이스

릴레이션 = 테이블 

레코드 = 튜플

테이블형태로 데이터를 다루고 정규화이론에 입각하여 데이터를 저장하고 조회화고 ***CONSISTENCY(일관성)*** 을 보장하는 것을 관계형 데이터베이스라고 한다.
- 2차원구조의 행(ROW) 와 행(COLUMN) 로 구성된 테이블
- SQL 이라는 공통의 질의 언어를 사용한다.! 
=> 구조화된 질의 언어
=> SQL 은 결과만 관심있다. !!! 결과만을 다룬다. !!!! 비절차적언어이다.!!!! 

---
## SELECT 문
- 데이터 조회 커리
- WHERE절을 통해 특정 조건의 열만 조회할 수 있다.
- 테이블에 대한 별명 부여 가능

```SQL
SELECT (속성명=회원번호,회원명 등) FROM 테이블명;
* 는 회원 테이블의 모든 칼럼 조회
```

FROM 절 뒤에 T1,T2,T3 ... 로 나열 되었을 때 자연적으로 JOIN 이 일어난다.

***SELECT 문의 실행순서***
SELELET FROM 절에서는 
1. FROM 이 먼저 실행되고 2. SELECT

SELELET FROM WHERE(조건) 절에서는 
1. FROM -> WHERE -> SELECT
 
## SQL문 구성과 실행 순서
[SELECT 문 구성]

```SQL
SELECT          ---- 5. 지정된 칼럼을 조회하며,
FROM    ---- 1. 테이블로부터,
WHERE     ---- 2. 조건에 맞는 행을 필터링하고,
GROUP BY    ---- 3. 그룹핑을 한 뒤,
HAVING        ---- 4. 조건에 맞는 그룹만 필터링하고,(이때, 그룹별 집계함수 사용가능)
ORDER BY        ---- 6. 졍렬을 수행한다.
```

***F W G H S O => 물에빠진 사람을 구했더니 'F' UCK 하면서 왜구해쏘 (W G H S O)***

---
---
## TRIM 함수
- 문자열을 처리하는 함수
- 문자열의 양끝단에서 공백이나 쓰레기 문자를 제거하는 함수

1. LEADING 문장의 앞
```SQL
SELEC TRIM(LEADING '가' FROM '가나다라') FROM DUAL;
```
-> '가나다라'의 앞에서 '가' 제거

2. TRAILING 문장의 끝
```SQL
SELEC TRIM(TRAILING '가' FROM '가나다라') FROM DUAL;
```
-> '가나다라' 의 뒤에서 '라' 제거

3. BOTH 양쪽 제거
```SQL
SELEC TRIM(BOTH '가' FROM '가나다라') FROM DUAL;
```

-> '가나다라가' 의 앞뒤 '가' 제거

---
---

## NULL 처리 ****

1. 💕💕💕 NVL
NULL 데이터에 대한 처리 예외를 둔다.
NULL인 데이터는 '' 으로 대체해서 사용한다. 

- 첫번째 인자가 NULL이 아니면 관심없음, 첫번째 인자를 그대로 반환, NULL이면 두번째 인자를 반환 

2. NVL(COMM, 0) => COMM 이 NULL 이면 0으로 바꾼다.

3. NULLIF 
어떤 특정값을 NULL로 치환하는 것

4. COALESCE (합체하다, 결합하다.)
- 입력된 인자를 순서대로 평가해 NULL이 아닌 첫번째 인자를 반환

---
---

## WHERE절
- 특정 조건을 만족하는 행만을 대상으로 연산 수행
- SELECT, UPDATE,DELETE // INSERT 에서는 사용 불가

***WHERE절에서 NULL과의 동등/부정 비교***
- WHERE절에서 NULL과의 동등/부정 비교는 ISNULL, IS NOT NULL만 사용 가능
- 비교연산자 쓸수없음!~!!!!!!!!!! 무조건FALSE가 나오기때문

---
---
## GROUP BY절 
💕💕💕 맨마지막!!!!!
- GROUP BY절
- 특정 값을 기준으로 데이터를 그룹핑할 때 사용
- DESC = 내림차순 ASC 또는 아무것도 추가안햇을때는 오름차순


- 집계함수 💕💕💕
1. COUNT - 입력된 칼럼에서 값이 NULL인 행을 제외한 행의 개수를 반환한다.
2. SUM - 입력된 칼럼의 합을 반환한다.
3. AVG - 입력된 칼럼의 평균을 반환한다.

4. MIN - 입력된 칼럼의 최솟값을 반환한다.
5. MAX - 입력된 칼럼의 최댓값을 반환한다.


**DISTINCT** (중복제거, 유일한것을 한번만 다루겠다.)
=> 칼럼명 앞에 DISTINCT를 붙이면 칼럼값의 중복을 제거하므로, 집계함수의 인자로 입력되는 칼럼명에 DISTINCT를 사용하면 해당 그룹에서 첫 번째 행에 대해서만 연산을 수행

## HAVING절 

### HAVING절과 WHERE 절 차이

- GROUP BY 절 뒤에 나오며, WHERE 절과 같은 조건절이다.
- HAVING 절은 GRUOP BY 연산의 결과에 대한 조건을 수행함. 즉, GROUP BY 결과를 필터링하는 것이 HAVING 절
- WHERE절은 GROUP BY 보다 먼저 실행됨 따라서 WHERE절의 조건은 GROUP BY 가 필터링 되기 이전에 실행이 되어버림
- HAVING 절은 집계함수를 쓸 수 있다.!!! 
- WHERE 절에는 집계함수 쓸 수 없다.


그럼 성능을 생각할 때는 어떨까 ???? 
- GROUP BY 는 연산부하가 높다. 연산이 많이 걸림
- 따라서 WHERE 절로 조건을 필터링 하고 GROUP BY 실행
- 결과는 똑같이 나오지만 연산속도가 달라진다. 


----
----

## 조인! JOIN

= > 테이블을 병합하는 현상

두개의 테이블을 더하는 현상 
다양한 방식이 있음

실습 꼭!!!!!!!!!!!!!💕💕💕💕

### EQUI JOIN
- EQUAL(=) 즉 등식을 조건으로 사용할 때 발생하는 조인

### NON EQUI JOIN
- WHERE절의 조건이 등식이 아닌 부등식을 사용해 범위를 나타낸 조건일 때 발생하는 조인

### INNER JOIN
- 교집합의 개념으로 기준이 되는 키에 따른 칼럼값이 존재하는 것만 병함
(칼럼 구성이 다른 두개의 테이블을 합하려면 조건이 있어야 함)

### 표준조인 

### OUTER JOIN
- 합집합!!! 
- 기준이 되는 키에 따른 칼럼값이 존재하지 않아도 모든 튜플을 병함
- 이럴경우, 값이 없는 속성이 나올수밖에 없는데, 
- 합하는 과정에서 속성값이 비어있으면 = NULL
- 왼쪽에 있는 테이블을 모두 포함시킨다 => LEFT OUTER JOIN
- 오른쪽에 있는 테이블을 모두 포함시킨다. -> RIGHT OUTRER JOIN
- 왼쪽 오른쪽 모두 포함 -> FULL OUTER JOIN

#### NATURAL JOIN
- 조인의 대상이 되는 두 테이블에서 같은 이름의 칼럼에 대해서는 동일한 칼럼값을 가지는 행만 병합
- ON 절이 필요없음

#### CROSS JOIN
- 모든 경우를 다 조합하는 것.

---
---
---

### TO-CHAR 는 DATE타입을 문자열로 바꾸는것! 포맷문자에 맞춰서 바꿈

